<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Local Playground</title>
    <style>
      :root {
      }

      body {
        margin: 0;
        padding: 0;
      }

      label,
      textarea {
        display: block;
        width: 100%;
        box-sizing: border-box;
        resize: none;
      }

      section {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        box-sizing: border-box;
        padding: 0.5em;
        gap: 0.5em;
        min-height: 100vh;
      }

      section > * {
        flex-grow: 1;
        min-width: 360px;
      }

      section > form {
        display: flex;
        flex-direction: column;
      }

      section > form > label {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }

      section > form > label > textarea {
        flex-grow: 1;
      }
    </style>
  </head>

  <body>
    <section>
      <form>
        <label>HTML<textarea id="html"></textarea></label>
        <label>CSS<textarea id="css"></textarea></label>
        <label>JS<textarea id="js"></textarea></label>
      </form>
      <iframe id="web"></iframe>
    </section>
    <script>
      function render() {
        web.srcdoc = `
        <!doctype html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />

            <title>Local Playground</title>
            <style>${css.value}</style>
          </head>
          <body>
            ${html.value || 'Output'}
            <script>
              ${js.value}
            <\/script>
          </body>
        </html>
      `
      }

      document.querySelectorAll('textarea,input').forEach(el => {
        el.addEventListener('input', e => {
          render()
        })
      })

      render()
    </script>
  </body>
</html>
