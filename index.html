<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Local Playground</title>
    <style>
      :root {
        color: #000;
        background: #fff;
      }

      @media (prefers-color-scheme: dark) {
        :root {
          color: #fff;
          background: #000;
        }

        iframe {
          filter: invert(1);
        }
      }

      * {
        margin: 0;
        padding: 0;
        gap: 0.5rem;
        box-sizing: border-box;
      }

      textarea,
      output,
      iframe {
        display: block;
        width: 100%;
        resize: none;
        flex-grow: 1;
      }

      textarea,
      iframe {
        background: inherit;
        color: inherit;
      }

      section {
        display: flex;
        flex-flow: row wrap;
        padding: 0.5em;
        min-height: 100vh;
      }

      section form,
      section label,
      section label > * {
        flex-grow: 1;
        min-width: 360px;
        display: flex;
        flex-direction: column;
      }
    </style>
  </head>

  <body>
    <section>
      <form>
        <label>HTML<textarea id="html"></textarea></label>
        <label>CSS<textarea id="css"></textarea></label>
        <label>JS<textarea id="js"></textarea></label>
      </form>
      <label
        >Output
        <output><iframe id="web"></iframe></output>
      </label>
    </section>
    <script>
      function render() {
        web.srcdoc = `
        <!doctype html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />

            <title>Local Playground</title>
            <style>${css.value}</style>
          </head>
          <body>
            ${html.value || 'Output'}
            <script>
              ${js.value}
            <\/script>
          </body>
        </html>
      `
      }

      document.querySelectorAll('textarea,input').forEach(el => {
        el.addEventListener('input', e => {
          render()
        })
      })

      render()
    </script>
  </body>
</html>
